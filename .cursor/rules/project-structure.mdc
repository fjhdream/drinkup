---
description: é¡¹ç›®ä»£ç ç»“æ„æ€»ç»“
globs: 
alwaysApply: false
---
## ğŸ—ï¸ DrinkUpé¡¹ç›®ä»£ç ç»“æ„æ€»ç»“

### ğŸ“‹ é¡¹ç›®æ¦‚è¿°
DrinkUpæ˜¯ä¸€æ¬¾ç¤¾äº¤é¥®å“åˆ†äº«åº”ç”¨çš„åç«¯æœåŠ¡ï¼Œé‡‡ç”¨**Spring Boot 3.4 + Spring Modulith**çš„æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼ŒåŸºäºJava 21å¼€å‘ã€‚

### ğŸ¯ æŠ€æœ¯æ¶æ„ç‰¹ç‚¹
- **æ¨¡å—åŒ–è®¾è®¡**: ä½¿ç”¨Spring Modulithå®ç°é¢†åŸŸé©±åŠ¨çš„æ¨¡å—åŒ–æ¶æ„
- **AIé›†æˆ**: é›†æˆSpring AIæ¡†æ¶ï¼Œæ”¯æŒå¤šä¸ªAIæ¨¡å‹ï¼ˆOpenAIã€DeepSeekã€æ™ºè°±AIï¼‰
- **å‘é‡æœç´¢**: é›†æˆMilvuså‘é‡æ•°æ®åº“ï¼Œæ”¯æŒRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰
- **å¾®æœåŠ¡åŸºç¡€è®¾æ–½**: Redisç¼“å­˜ã€MariaDBå­˜å‚¨ã€AWS S3å¯¹è±¡å­˜å‚¨
- **å¯è§‚æµ‹æ€§**: é›†æˆOpenTelemetryã€Prometheusç›‘æ§

### ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

#### æ ¹ç›®å½•ç»“æ„
```
drinkup/
â”œâ”€â”€ src/                    # æºä»£ç æ ¹ç›®å½•
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ databases/          # æ•°æ®åº“ç›¸å…³æ–‡æ¡£
â”‚   â”œâ”€â”€ data/              # æ•°æ®æ–‡æ¡£
â”‚   â””â”€â”€ scripts/           # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ application.yaml   # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ logback-spring.xml # æ—¥å¿—é…ç½®
â”œâ”€â”€ .data/                  # æœ¬åœ°å¼€å‘æ•°æ®å­˜å‚¨
â”œâ”€â”€ certs/                  # è¯ä¹¦æ–‡ä»¶
â”œâ”€â”€ compose.yaml           # Docker Composeé…ç½®
â”œâ”€â”€ pom.xml                # Mavenæ„å»ºé…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

#### æ ¸å¿ƒæºç ç»“æ„ (`src/main/java/cool/drinkup/drinkup/`)

```
cool.drinkup.drinkup/
â”œâ”€â”€ DrinkupApplication.java    # åº”ç”¨å¯åŠ¨ç±»
â”œâ”€â”€ config/                    # å…¨å±€é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ JacksonConfig.java     # JSONåºåˆ—åŒ–é…ç½®
â”‚   â”œâ”€â”€ SecurityConfig.java    # å®‰å…¨é…ç½®
â”‚   â”œâ”€â”€ SessionConfig.java     # ä¼šè¯é…ç½®
â”‚   â”œâ”€â”€ OpenTelemetryAppenderInitializer.java  # é“¾è·¯è¿½è¸ªé…ç½®
â”‚   â””â”€â”€ Interceptors/          # æ‹¦æˆªå™¨é…ç½®
â”œâ”€â”€ common/                    # å…¬å…±æ¨¡å—
â”‚   â””â”€â”€ log/                   # æ—¥å¿—ç›¸å…³åŠŸèƒ½
â”œâ”€â”€ shared/                    # å…±äº«æ¨¡å—
â”‚   â”œâ”€â”€ spi/                   # æœåŠ¡æä¾›æ¥å£
â”‚   â””â”€â”€ dto/                   # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ user/                      # ç”¨æˆ·æ¨¡å— ğŸ§‘â€ğŸ’¼
â”œâ”€â”€ wine/                      # é…’æ°´æ¨¡å— ğŸ·
â”œâ”€â”€ favorite/                  # æ”¶è—æ¨¡å— â¤ï¸
â”œâ”€â”€ workflow/                  # å·¥ä½œæµæ¨¡å— âš™ï¸
â””â”€â”€ infrastructure/            # åŸºç¡€è®¾æ–½æ¨¡å— ğŸ—ï¸
```

### ğŸ¯ æ ¸å¿ƒä¸šåŠ¡æ¨¡å—è¯¦è§£

#### 1. **Useræ¨¡å—** (`user/`) - ç”¨æˆ·ç®¡ç†
```
user/
â”œâ”€â”€ package-info.java         # æ¨¡å—å£°æ˜ (@ApplicationModule)
â”œâ”€â”€ spi/                      # å¯¹å¤–æš´éœ²æ¥å£
â””â”€â”€ internal/                 # å†…éƒ¨å®ç°
    â”œâ”€â”€ controller/           # REST APIæ§åˆ¶å™¨
    â”œâ”€â”€ service/              # ä¸šåŠ¡é€»è¾‘å±‚
    â”œâ”€â”€ repository/           # æ•°æ®è®¿é—®å±‚
    â”œâ”€â”€ model/                # é¢†åŸŸæ¨¡å‹
    â”œâ”€â”€ mapper/               # å¯¹è±¡æ˜ å°„å™¨
    â””â”€â”€ config/               # æ¨¡å—é…ç½®
```

#### 2. **Wineæ¨¡å—** (`wine/`) - é…’æ°´ç®¡ç†ä¸AIåŠŸèƒ½
```
wine/
â”œâ”€â”€ package-info.java         # æ¨¡å—å£°æ˜
â”œâ”€â”€ spi/                      # å¯¹å¤–æš´éœ²æ¥å£
â””â”€â”€ internal/                 # å†…éƒ¨å®ç°
    â”œâ”€â”€ controller/           # APIæ§åˆ¶å™¨
    â”œâ”€â”€ service/              # ä¸šåŠ¡æœåŠ¡
    â”œâ”€â”€ rag/                  # RAGæ£€ç´¢å¢å¼ºç”ŸæˆåŠŸèƒ½ ğŸ¤–
    â”œâ”€â”€ repository/           # æ•°æ®ä»“åº“
    â”œâ”€â”€ model/                # æ•°æ®æ¨¡å‹
    â”œâ”€â”€ mapper/               # æ˜ å°„å™¨
    â”œâ”€â”€ spi/                  # å†…éƒ¨SPI
    â””â”€â”€ config/               # é…ç½®
```

#### 3. **Favoriteæ¨¡å—** (`favorite/`) - æ”¶è—åŠŸèƒ½
```
favorite/
â”œâ”€â”€ package-info.java
â”œâ”€â”€ spi/                      # æœåŠ¡æ¥å£
â””â”€â”€ internal/                 # å†…éƒ¨å®ç°
```

#### 4. **Workflowæ¨¡å—** (`workflow/`) - å·¥ä½œæµå¼•æ“
```
workflow/
â”œâ”€â”€ package-info.java
â””â”€â”€ internal/                 # å·¥ä½œæµé€»è¾‘å®ç°
```

#### 5. **Infrastructureæ¨¡å—** (`infrastructure/`) - åŸºç¡€è®¾æ–½
```
infrastructure/
â”œâ”€â”€ package-info.java
â”œâ”€â”€ spi/                      # åŸºç¡€è®¾æ–½æ¥å£
â””â”€â”€ internal/
    â”œâ”€â”€ sms/                  # çŸ­ä¿¡æœåŠ¡
    â””â”€â”€ image/                # å›¾ç‰‡å¤„ç†æœåŠ¡
```

### ğŸ›ï¸ æ¶æ„è®¾è®¡åŸåˆ™

#### 1. **æ¨¡å—åŒ–éš”ç¦»**
- æ¯ä¸ªæ¨¡å—ä½¿ç”¨`@ApplicationModule`æ³¨è§£å£°æ˜
- é‡‡ç”¨`spi/`å’Œ`internal/`åˆ†ç¦»è®¾è®¡ï¼š
  - `spi/`: å¯¹å¤–æš´éœ²çš„æœåŠ¡æ¥å£
  - `internal/`: æ¨¡å—å†…éƒ¨å®ç°ï¼Œå¤–éƒ¨æ¨¡å—ä¸å¯ç›´æ¥è®¿é—®

#### 2. **åˆ†å±‚æ¶æ„** (æ¯ä¸ªä¸šåŠ¡æ¨¡å—å†…éƒ¨)
```
Controller Layer    â†’ REST APIæ¥å£å±‚
Service Layer       â†’ ä¸šåŠ¡é€»è¾‘å±‚  
Repository Layer    â†’ æ•°æ®è®¿é—®å±‚
Model Layer         â†’ é¢†åŸŸæ¨¡å‹å±‚
Mapper Layer        â†’ å¯¹è±¡æ˜ å°„å±‚
Config Layer        â†’ é…ç½®å±‚
```

#### 3. **æ¨ªåˆ‡å…³æ³¨ç‚¹**
- **Commonæ¨¡å—**: æä¾›æ—¥å¿—ç­‰å…¬å…±åŠŸèƒ½
- **Sharedæ¨¡å—**: æä¾›è·¨æ¨¡å—çš„DTOå’ŒSPIæ¥å£
- **Configæ¨¡å—**: å…¨å±€é…ç½®ç®¡ç†

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§

#### 1. **AIé›†æˆèƒ½åŠ›**
- Wineæ¨¡å—é›†æˆRAGåŠŸèƒ½ï¼Œæ”¯æŒæ™ºèƒ½é…’æ°´æ¨è
- å¤šAIæ¨¡å‹æ”¯æŒï¼ˆOpenAIã€DeepSeekã€æ™ºè°±AIï¼‰
- Milvuså‘é‡æ•°æ®åº“è¿›è¡Œè¯­ä¹‰æœç´¢

#### 2. **åŸºç¡€è®¾æ–½æœåŠ¡**
- **çŸ­ä¿¡æœåŠ¡**: é˜¿é‡Œäº‘SMSé›†æˆ
- **å›¾ç‰‡å¤„ç†**: AWS S3å¯¹è±¡å­˜å‚¨
- **ç¼“å­˜**: Redisä¼šè¯å’Œæ•°æ®ç¼“å­˜
- **æ•°æ®åº“**: MariaDBå…³ç³»å‹å­˜å‚¨

#### 3. **å¯è§‚æµ‹æ€§**
- OpenTelemetryåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª
- Micrometer + PrometheusæŒ‡æ ‡ç›‘æ§
- ç»“æ„åŒ–æ—¥å¿—è®°å½•
